â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           TESTE E2E - SISTEMA DE CRIAÃ‡ÃƒO DE MINUTAS - SUMÃRIO               â•‘
â•‘                      Data: 25 de Dezembro de 2025                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RESULTADO GERAL: âŒ FALHA CRÃTICA                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

TESTES EXECUTADOS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… Login/AutenticaÃ§Ã£o
   â””â”€ Status: FUNCIONA
   â””â”€ UsuÃ¡rio: Test User (Administrador)
   â””â”€ SessÃ£o: Ativa

âœ… Dashboard
   â””â”€ Status: FUNCIONA
   â””â”€ Casos Listados: 7
   â””â”€ PaginaÃ§Ã£o: Funciona
   â””â”€ Filtros: Funcionam

âŒ Criar Novo Caso (Novo Minuta)
   â””â”€ Status: ERRO CRÃTICO
   â””â”€ Erro: Maximum update depth exceeded
   â””â”€ Causa: Loop infinito em PurchaseSaleFlowPage
   â””â”€ Impacto: Sistema nÃ£o consegue criar minutas

âŒ Continuar Caso Existente
   â””â”€ Status: ERRO CRÃTICO
   â””â”€ Erro: Same as above (Maximum update depth exceeded)
   â””â”€ Impacto: NÃ£o consegue editar minutas existentes

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

PROBLEMAS IDENTIFICADOS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ”´ PROBLEMA #1 - LOOP INFINITO (CRÃTICO)
   â”œâ”€ Arquivo: src/pages/PurchaseSaleFlowPage.tsx
   â”œâ”€ Linhas: 831-835
   â”œâ”€ Causa: useEffect sem dependÃªncias chama navigate()
   â”œâ”€ Impacto: Impede fluxo completo de minutas
   â””â”€ Severidade: BLOQUEANTE

ğŸŸ¡ PROBLEMA #2 - ESLINT RULE IGNORADA
   â”œâ”€ Arquivo: src/pages/PurchaseSaleFlowPage.tsx
   â”œâ”€ Linha: 835
   â”œâ”€ Regra: eslint-disable-line react-hooks/exhaustive-deps
   â”œâ”€ Causa: Alerta de dependÃªncias foi desativado
   â””â”€ Risco: Permite cÃ³digo problemÃ¡tico passar sem aviso

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CONSOLE ERRORS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€ React Error #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Error: Maximum update depth exceeded. This can happen when a component    â”‚
â”‚ repeatedly calls setState instead of passing an updated state to setState.â”‚
â”‚                                                                            â”‚
â”‚ The above error occurred in the <PurchaseSaleFlowPage> component:       â”‚
â”‚                                                                            â”‚
â”‚ Location: http://localhost:5173/purchase-sale-flow                       â”‚
â”‚ Stack: PurchaseSaleFlowPage â†’ usePurchaseSaleFlow â†’ flowStore           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ WebSocket Warning â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WebSocket connection to                                                    â”‚
â”‚ 'wss://kllcbgoqtxedlfbkxpfo.supabase.co/realtime/v1/websocket?apik...'  â”‚
â”‚                                                                            â”‚
â”‚ Status: Aviso (nÃ£o causa bloqueio)                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

TESTES AUTOMATIZADOS (npm run test:regression):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Total de Testes: 130
â”œâ”€ Chromium: 130 testes
â”œâ”€ Firefox: (nÃ£o executados - teste parou no erro)
â””â”€ WebKit: (nÃ£o executados - teste parou no erro)

Status: âŒ TODOS BLOQUEADOS

Testes Bloqueados:
â”œâ”€ T001-T008: Case Management tests
â”œâ”€ T009-T016: Document Upload tests
â”œâ”€ T017+: Entity Extraction, Canvas, Draft tests
â””â”€ Total Afetado: 130/130 testes (100%)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

FLUXO DE NAVEGAÃ‡ÃƒO TESTADO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Dashboard
   â†“
2. Clique em "Novo Caso"
   â†“
3. ğŸ”´ ERROR: Maximum update depth exceeded
   â”œâ”€ PÃ¡gina fica em branco
   â”œâ”€ Console mostra erro crÃ­tico
   â””â”€ UsuÃ¡rio nÃ£o consegue prosseguir

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ARQUIVOS GERADOS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… RELATORIO_TESTE_E2E.md
   â””â”€ RelatÃ³rio detalhado com anÃ¡lise completa e recomendaÃ§Ãµes

âœ… ERRO_CRITICO_IDENTIFICADO.md
   â””â”€ Documento focado no erro com soluÃ§Ã£o rÃ¡pida

âœ… SUMARIO_TESTE_VISUAL.txt (este arquivo)
   â””â”€ Resumo visual dos achados

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

RECOMENDAÃ‡ÃƒO IMEDIATA:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ”§ AÃ‡ÃƒO URGENTE: Corrigir o useEffect em PurchaseSaleFlowPage.tsx

   Tempo Estimado: 5-10 minutos de implementaÃ§Ã£o

   Passos:
   1. Abrir: src/pages/PurchaseSaleFlowPage.tsx
   2. Adicionar useRef para rastrear inicializaÃ§Ã£o
   3. Adicionar flow.isActive como dependÃªncia do useEffect
   4. Remover eslint-disable-line
   5. Executar: npm run typecheck && npm run lint
   6. Testar no browser: Criar novo caso
   7. Rodar: npm run test:regression

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

AMBIENTE DE TESTE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… Servidor: Vite dev server (localhost:5173)
âœ… Base de Dados: Supabase conectada
âœ… AutenticaÃ§Ã£o: Funcionando
âœ… Browser: Chromium (Playwright)
âœ… Node: v18+
âœ… npm: DependÃªncias instaladas

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CONCLUSÃƒO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

O sistema tem uma falha crÃ­tica que impede qualquer operaÃ§Ã£o de criaÃ§Ã£o ou
ediÃ§Ã£o de minutas. A causa Ã© um loop infinito de atualizaÃ§Ã£o de estado no
componente PurchaseSaleFlowPage.

O problema Ã© localizÃ¡vel e corrigÃ­vel em menos de 10 minutos. Recomenda-se
implementar a soluÃ§Ã£o imediatamente antes de prosseguir com desenvolvimento
adicional.

Severidade: ğŸ”´ CRÃTICA
Status: ğŸ”´ BLOQUEANTE
Impacto: 100% do fluxo de minutas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
