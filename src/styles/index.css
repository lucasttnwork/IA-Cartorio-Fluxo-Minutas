@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom base styles */
@layer base {
  :root {
    /* Primary colors - WCAG AA compliant */
    --color-primary: 30 64 175; /* #1E40AF (blue-800) - 8.59:1 on white */
    --color-primary-hover: 30 58 138; /* #1D3A8A (blue-900) - 10.67:1 on white */

    /* Status colors - WCAG AA compliant */
    --color-success: 6 95 70; /* #065F46 (green-800) - 8.27:1 on white */
    --color-warning: 146 64 14; /* #92400E (amber-800) - 7.48:1 on white */
    --color-error: 153 27 27; /* #991B1B (red-800) - 7.71:1 on white */

    /* Background colors - Light mode */
    --color-bg: 255 255 255; /* #FFFFFF */
    --color-surface: 249 250 251; /* #F9FAFB */

    /* Text colors - Light mode - WCAG AA compliant */
    --color-text: 17 24 39; /* #111827 (gray-900) - 16.11:1 on white */
    --color-text-muted: 75 85 99; /* #4B5563 (gray-600) - 7.12:1 on white */

    /* Border colors - Light mode */
    --color-border: 229 231 235; /* #E5E7EB */

    /* ===== SHADCN THEME VARIABLES (LIGHT MODE) ===== */
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 221.2 83.2% 53.3%;
    --radius: 0.5rem;
  }

  .dark {
    /* Background colors - Dark mode */
    --color-bg: 17 24 39; /* #111827 (gray-900) */
    --color-surface: 31 41 55; /* #1F2937 (gray-800) */

    /* Text colors - Dark mode - WCAG AA compliant */
    --color-text: 249 250 251; /* #F9FAFB (gray-50) - 15.56:1 on gray-900 */
    --color-text-muted: 209 213 219; /* #D1D5DB (gray-300) - 9.73:1 on gray-900 */

    /* Border colors - Dark mode */
    --color-border: 75 85 99; /* #4B5563 (gray-600) - Better visibility */

    /* Status colors - Dark mode - WCAG AA compliant */
    --color-primary-dark: 147 197 253; /* #93C5FD (blue-300) - 7.12:1 on gray-900 */
    --color-success-dark: 110 231 183; /* #6EE7B7 (green-300) - 8.44:1 on gray-900 */
    --color-warning-dark: 252 211 77; /* #FCD34D (amber-300) - 10.35:1 on gray-900 */
    --color-error-dark: 252 165 165; /* #FCA5A5 (red-300) - 7.37:1 on gray-900 */

    /* ===== SHADCN THEME VARIABLES (DARK MODE) ===== */
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 224.3 76.3% 48%;
  }

  /* ===== HIGH CONTRAST MODE ===== */
  /* WCAG AAA compliant colors (7:1 minimum contrast ratio) */
  .high-contrast {
    /* Enhanced background colors - High contrast light mode */
    --color-bg: 255 255 255; /* #FFFFFF - Pure white */
    --color-surface: 255 255 255; /* #FFFFFF - Pure white for maximum contrast */

    /* Enhanced text colors - WCAG AAA compliant (7:1+) */
    --color-text: 0 0 0; /* #000000 - Pure black - 21:1 on white */
    --color-text-muted: 31 41 55; /* #1F2937 (gray-800) - 12.63:1 on white */

    /* Enhanced border colors - Higher visibility */
    --color-border: 0 0 0; /* #000000 - Pure black borders */

    /* Enhanced status colors - WCAG AAA compliant */
    --color-primary: 29 78 216; /* #1D4ED8 (blue-700) - 8.59:1 on white */
    --color-primary-hover: 30 58 138; /* #1E3A8A (blue-900) - 10.67:1 on white */
    --color-success: 21 128 61; /* #15803D (green-700) - 7.35:1 on white */
    --color-warning: 180 83 9; /* #B45309 (amber-700) - 7.02:1 on white */
    --color-error: 185 28 28; /* #B91C1C (red-700) - 8.59:1 on white */

    /* ===== SHADCN THEME VARIABLES (HIGH CONTRAST LIGHT) ===== */
    --background: 0 0% 100%;
    --foreground: 0 0% 0%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 0%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 0%;
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 0 0% 0%;
    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 20%;
    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 0%;
    --border: 0 0% 0%;
    --input: 0 0% 0%;
    --ring: 217.2 91.2% 59.8%;
  }

  /* High contrast mode with dark theme */
  .high-contrast.dark {
    /* Enhanced background colors - High contrast dark mode */
    --color-bg: 0 0 0; /* #000000 - Pure black */
    --color-surface: 0 0 0; /* #000000 - Pure black for maximum contrast */

    /* Enhanced text colors - WCAG AAA compliant (7:1+) */
    --color-text: 255 255 255; /* #FFFFFF - Pure white - 21:1 on black */
    --color-text-muted: 229 231 235; /* #E5E7EB (gray-200) - 13.54:1 on black */

    /* Enhanced border colors - Higher visibility */
    --color-border: 255 255 255; /* #FFFFFF - Pure white borders */

    /* Enhanced status colors - WCAG AAA compliant on black */
    --color-primary-dark: 96 165 250; /* #60A5FA (blue-400) - 8.59:1 on black */
    --color-success-dark: 74 222 128; /* #4ADE80 (green-400) - 10.35:1 on black */
    --color-warning-dark: 251 191 36; /* #FBBF24 (amber-400) - 12.04:1 on black */
    --color-error-dark: 248 113 113; /* #F87171 (red-400) - 7.71:1 on black */

    /* ===== SHADCN THEME VARIABLES (HIGH CONTRAST DARK) ===== */
    --background: 0 0% 0%;
    --foreground: 0 0% 100%;
    --card: 0 0% 0%;
    --card-foreground: 0 0% 100%;
    --popover: 0 0% 0%;
    --popover-foreground: 0 0% 100%;
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 0 0% 100%;
    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 100%;
    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 80%;
    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 100%;
    --border: 0 0% 100%;
    --input: 0 0% 100%;
    --ring: 217.2 91.2% 59.8%;
  }

  body {
    @apply bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-50;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
  }

  /* High contrast mode body styles */
  .high-contrast body {
    @apply bg-white text-black;
  }

  .high-contrast.dark body {
    @apply bg-black text-white;
  }

  * {
    @apply border-gray-300 dark:border-gray-600;
  }

  /* High contrast mode border styles */
  .high-contrast * {
    @apply border-black;
  }

  .high-contrast.dark * {
    @apply border-white;
  }

  /* Screen reader only utility */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* ===== FOCUS-VISIBLE STYLES FOR ACCESSIBILITY ===== */

  /* Global focus-visible styles for keyboard navigation */
  *:focus-visible {
    outline: 2px solid theme('colors.blue.500');
    outline-offset: 2px;
  }

  .dark *:focus-visible {
    outline-color: theme('colors.blue.400');
  }

  /* Enhanced focus styles for links */
  a:focus-visible {
    outline: 2px solid theme('colors.blue.500');
    outline-offset: 3px;
    border-radius: 2px;
  }

  .dark a:focus-visible {
    outline-color: theme('colors.blue.400');
  }

  /* Enhanced focus styles for buttons */
  button:focus-visible {
    outline: 2px solid theme('colors.blue.500');
    outline-offset: 2px;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }

  .dark button:focus-visible {
    outline-color: theme('colors.blue.400');
    box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.15);
  }

  /* Enhanced focus styles for form inputs */
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    outline: 2px solid theme('colors.blue.500');
    outline-offset: 0;
    border-color: transparent;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }

  .dark input:focus-visible,
  .dark textarea:focus-visible,
  .dark select:focus-visible {
    outline-color: theme('colors.blue.400');
    box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.15);
  }

  /* Focus styles for checkboxes and radio buttons */
  input[type="checkbox"]:focus-visible,
  input[type="radio"]:focus-visible {
    outline: 2px solid theme('colors.blue.500');
    outline-offset: 2px;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }

  .dark input[type="checkbox"]:focus-visible,
  .dark input[type="radio"]:focus-visible {
    outline-color: theme('colors.blue.400');
    box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.15);
  }

  /* Focus styles for custom interactive elements */
  [role="button"]:focus-visible,
  [role="tab"]:focus-visible,
  [role="option"]:focus-visible,
  [role="menuitem"]:focus-visible,
  [role="checkbox"]:focus-visible,
  [role="radio"]:focus-visible,
  [role="switch"]:focus-visible {
    outline: 2px solid theme('colors.blue.500');
    outline-offset: 2px;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }

  .dark [role="button"]:focus-visible,
  .dark [role="tab"]:focus-visible,
  .dark [role="option"]:focus-visible,
  .dark [role="menuitem"]:focus-visible,
  .dark [role="checkbox"]:focus-visible,
  .dark [role="radio"]:focus-visible,
  .dark [role="switch"]:focus-visible {
    outline-color: theme('colors.blue.400');
    box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.15);
  }

  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }

    *:focus-visible {
      transition: none !important;
    }

    /* Disable modal animations for reduced motion preference */
    .glass-overlay,
    .glass-dialog {
      transition: none !important;
      animation: none !important;
    }

    [data-state="open"],
    [data-state="closed"] {
      animation: none !important;
    }

    /* Disable page transition animations */
    [data-framer-motion] {
      animation: none !important;
      transition: none !important;
    }
  }

  /* Reduced motion class - applied when user or system prefers reduced motion */
  .reduced-motion,
  .reduced-motion *,
  .reduced-motion *::before,
  .reduced-motion *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .reduced-motion *:focus-visible {
    transition: none !important;
  }

  /* Disable modal animations for reduced motion class */
  .reduced-motion .glass-overlay,
  .reduced-motion .glass-dialog {
    transition: none !important;
    animation: none !important;
  }

  .reduced-motion [data-state="open"],
  .reduced-motion [data-state="closed"] {
    animation: none !important;
  }

  /* Disable page transition animations for reduced motion class */
  .reduced-motion [data-framer-motion] {
    animation: none !important;
    transition: none !important;
  }

  /* Disable specific animations */
  .reduced-motion .animate-pulse-subtle,
  .reduced-motion .animate-fade-in,
  .reduced-motion .animate-form-error-slide-in,
  .reduced-motion .page-transition-enter,
  .reduced-motion .page-transition-exit {
    animation: none !important;
  }

  /* Disable dropzone animations */
  .reduced-motion .dropzone-idle,
  .reduced-motion .dropzone-active,
  .reduced-motion .dropzone-icon-idle,
  .reduced-motion .dropzone-icon-active {
    transition: none !important;
    transform: none !important;
  }

  /* Disable avatar group animations */
  .reduced-motion .avatar-group .avatar {
    transition: none !important;
  }

  .reduced-motion .avatar-group .avatar:hover {
    transform: none !important;
  }

  /* Disable card hover animations */
  .reduced-motion .card-hover,
  .reduced-motion .file-queue-card {
    transition: none !important;
    transform: none !important;
  }

  /* Disable expandable card chevron animation */
  .reduced-motion .card-expandable-chevron {
    transition: none !important;
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    *:focus-visible {
      outline-width: 3px;
      outline-offset: 3px;
    }

    button:focus-visible,
    input:focus-visible,
    textarea:focus-visible,
    select:focus-visible {
      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
    }

    .dark button:focus-visible,
    .dark input:focus-visible,
    .dark textarea:focus-visible,
    .dark select:focus-visible {
      box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.25);
    }
  }
}

/* Custom component styles */
@layer components {
  /* ===== GLASSMORPHISM UTILITIES ===== */
  .glass {
    @apply backdrop-blur-md bg-white/80 dark:bg-gray-900/80;
  }

  .glass-card {
    @apply backdrop-blur-md rounded-lg border;
    @apply bg-white/95 border-gray-200/80;
    @apply dark:bg-gray-800/95 dark:border-gray-600/50;
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.08),
      0 2px 4px -2px rgba(0, 0, 0, 0.05),
      0 0 0 1px rgba(0, 0, 0, 0.03);
  }

  :is(.dark) .glass-card {
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.4),
      0 2px 4px -2px rgba(0, 0, 0, 0.25),
      0 0 0 1px rgba(255, 255, 255, 0.05);
  }

  .glass-strong {
    @apply backdrop-blur-xl bg-white/90 dark:bg-gray-900/90;
  }

  .glass-subtle {
    @apply backdrop-blur-sm bg-white/60 dark:bg-gray-900/60;
  }

  .glass-popover {
    @apply glass rounded-md border border-white/30 dark:border-gray-600/50 shadow-2xl;
  }

  .glass-dialog {
    @apply backdrop-blur-xl bg-white/95 dark:bg-gray-900/95 border border-white/20 dark:border-gray-700/30 rounded-xl shadow-2xl;
    transition: transform 300ms ease-in-out, opacity 300ms ease-in-out;
  }

  /* Modal overlay styling with glassmorphism */
  .glass-overlay {
    @apply backdrop-blur-sm bg-black/50 dark:bg-black/70;
    transition: backdrop-filter 300ms ease-in-out;
  }

  .glass-gradient {
    @apply glass bg-gradient-to-br from-white/90 to-white/70 dark:from-gray-900/90 dark:to-gray-800/70;
  }

  .glass-elevated {
    @apply glass-strong shadow-2xl ring-1 ring-black/5 dark:ring-white/10;
  }

  /* Login card with elegant backdrop shadow */
  .glass-login {
    @apply backdrop-blur-xl bg-white/90 dark:bg-gray-800/90 rounded-2xl border border-white/30 dark:border-gray-600/40;
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.1),
      0 25px 50px -12px rgba(0, 0, 0, 0.25),
      0 0 100px rgba(59, 130, 246, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }

  .dark .glass-login {
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.08),
      0 25px 60px -12px rgba(0, 0, 0, 0.6),
      0 0 80px rgba(59, 130, 246, 0.25),
      0 0 120px rgba(59, 130, 246, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  /* Primary gradient button for prominent CTAs */
  .btn-primary-gradient {
    @apply relative overflow-hidden font-semibold text-white transition-all duration-300;
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 50%, #1e40af 100%);
    box-shadow:
      0 4px 15px rgba(59, 130, 246, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }

  .btn-primary-gradient:hover:not(:disabled) {
    transform: translateY(-1px);
    box-shadow:
      0 6px 20px rgba(59, 130, 246, 0.5),
      inset 0 1px 0 rgba(255, 255, 255, 0.25);
  }

  .btn-primary-gradient:active:not(:disabled) {
    transform: translateY(0);
    box-shadow:
      0 2px 10px rgba(59, 130, 246, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.15);
  }

  .btn-primary-gradient:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .dark .btn-primary-gradient {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 50%, #1d4ed8 100%);
    box-shadow:
      0 4px 15px rgba(59, 130, 246, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.15);
  }

  .dark .btn-primary-gradient:hover:not(:disabled) {
    box-shadow:
      0 6px 20px rgba(59, 130, 246, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }

  /* ===== DEEP LINK HIGHLIGHT STYLES ===== */
  .deep-link-highlight {
    @apply relative;
    animation: deep-link-pulse 2s ease-out;
  }

  .deep-link-highlight::before {
    content: '';
    @apply absolute inset-0 -m-2 rounded-lg pointer-events-none;
    @apply bg-blue-500/10 dark:bg-blue-400/15;
    @apply ring-2 ring-blue-500/50 dark:ring-blue-400/50;
    animation: deep-link-ring-fade 2s ease-out forwards;
  }

  @keyframes deep-link-pulse {
    0% {
      transform: scale(1);
    }
    10% {
      transform: scale(1.01);
    }
    20% {
      transform: scale(1);
    }
  }

  @keyframes deep-link-ring-fade {
    0% {
      opacity: 1;
    }
    70% {
      opacity: 1;
    }
    100% {
      opacity: 0;
    }
  }

  /* Section anchor styling for deep links */
  [data-section-id] {
    scroll-margin-top: 6rem; /* Offset for fixed headers */
  }

  /* ===== DROPZONE ENHANCED STYLES ===== */
  .dropzone {
    @apply glass-card border-2 border-dashed cursor-pointer transition-all duration-300;
  }

  .dropzone-idle {
    @apply dropzone border-gray-300 dark:border-gray-600
           hover:border-blue-400 hover:bg-gradient-to-br hover:from-blue-50/30 hover:to-indigo-50/30
           dark:hover:border-blue-500 dark:hover:from-blue-900/20 dark:hover:to-indigo-900/20
           hover:shadow-lg hover:scale-[1.01];
  }

  .dropzone-active {
    @apply dropzone border-blue-500 bg-gradient-to-br from-blue-100/80 to-indigo-100/60
           dark:border-blue-400 dark:from-blue-900/40 dark:to-indigo-900/30
           shadow-2xl shadow-blue-200/50 dark:shadow-blue-900/30
           scale-[1.02] ring-4 ring-blue-200/50 dark:ring-blue-800/50;
  }

  .dropzone-reject {
    @apply dropzone border-red-500 bg-gradient-to-br from-red-100/80 to-pink-100/60
           dark:border-red-400 dark:from-red-900/40 dark:to-pink-900/30
           shadow-2xl shadow-red-200/50 dark:shadow-red-900/30
           ring-4 ring-red-200/50 dark:ring-red-800/50;
  }

  .dropzone-disabled {
    @apply dropzone border-gray-300 dark:border-gray-700
           bg-gray-50/80 dark:bg-gray-800/60
           cursor-not-allowed opacity-60;
  }

  .dropzone-icon-container {
    @apply w-20 h-20 rounded-full flex items-center justify-center mb-6
           transition-all duration-300 shadow-lg backdrop-blur-sm;
  }

  .dropzone-icon-idle {
    @apply dropzone-icon-container
           bg-gradient-to-br from-gray-100 to-gray-200
           dark:from-gray-700 dark:to-gray-800
           group-hover:from-blue-100 group-hover:to-indigo-100
           dark:group-hover:from-blue-900/60 dark:group-hover:to-indigo-900/60
           group-hover:scale-110 group-hover:shadow-xl;
  }

  .dropzone-icon-active {
    @apply dropzone-icon-container
           bg-gradient-to-br from-blue-400 to-indigo-500
           dark:from-blue-500 dark:to-indigo-600
           scale-110 shadow-xl animate-pulse-subtle;
  }

  .dropzone-icon-reject {
    @apply dropzone-icon-container
           bg-gradient-to-br from-red-400 to-pink-500
           dark:from-red-500 dark:to-pink-600
           scale-110 shadow-xl;
  }

  /* File Queue Card Enhancements */
  .file-queue-card {
    @apply glass-card transition-all duration-300
           hover:shadow-lg hover:scale-[1.01]
           border border-gray-200 dark:border-gray-700;
  }

  .file-queue-card-large {
    @apply file-queue-card border-yellow-200 dark:border-yellow-800
           bg-gradient-to-r from-yellow-50/50 to-amber-50/50
           dark:from-yellow-900/20 dark:to-amber-900/20
           shadow-yellow-100 dark:shadow-yellow-900/20;
  }

  /* Avatar styles */
  .avatar {
    @apply relative inline-flex items-center justify-center rounded-full font-semibold;
  }

  .avatar-ring {
    @apply ring-2 ring-white dark:ring-gray-800 shadow-sm;
  }

  .avatar-status {
    @apply absolute bottom-0 right-0 rounded-full ring-2 ring-white dark:ring-gray-800;
  }

  .avatar-group {
    @apply flex -space-x-2;
  }

  .avatar-group .avatar {
    @apply ring-2 ring-white dark:ring-gray-800 hover:z-10 transition-transform hover:scale-110;
  }

  /* User profile card styles */
  .user-profile-card {
    @apply flex items-center gap-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-900/50;
  }

  .user-profile-info {
    @apply flex-1 min-w-0;
  }

  .user-profile-name {
    @apply text-sm font-medium text-gray-900 dark:text-white truncate;
  }

  .user-profile-role {
    @apply text-xs text-gray-500 dark:text-gray-400;
  }

  /* Role badge styles */
  .role-badge {
    @apply inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium;
  }

  .role-badge-admin {
    @apply role-badge bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400;
  }

  .role-badge-supervisor {
    @apply role-badge bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400;
  }

  .role-badge-clerk {
    @apply role-badge bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300;
  }

  /* Card styles */
  .card {
    @apply bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm;
  }

  .card-hover {
    @apply card transition-all duration-200 hover:shadow-md hover:scale-[1.02];
  }

  /* Expandable card styles */
  .card-expandable {
    @apply card overflow-hidden;
  }

  .card-expandable-header {
    @apply w-full text-left p-4 flex items-center gap-3
           transition-colors duration-150
           cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50
           focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500;
  }

  .card-expandable-header:disabled {
    @apply cursor-default opacity-60 hover:bg-transparent dark:hover:bg-transparent;
  }

  .card-expandable-content {
    @apply border-t border-gray-200 dark:border-gray-700;
  }

  .card-expandable-chevron {
    @apply flex-shrink-0 text-gray-400 dark:text-gray-500 transition-transform duration-250;
  }

  .card-expandable-chevron.expanded {
    @apply rotate-180;
  }

  /* Button styles */
  .btn {
    @apply inline-flex items-center justify-center px-4 py-2 rounded-md font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:pointer-events-none disabled:shadow-none;
  }

  .btn-primary {
    @apply btn bg-blue-700 text-white hover:bg-blue-800 focus:ring-blue-500
           active:bg-blue-900 dark:bg-blue-600 dark:hover:bg-blue-700 dark:active:bg-blue-800;
  }

  .btn-primary-outline {
    @apply btn border-2 border-blue-700 text-blue-800 bg-transparent
           hover:bg-blue-50 hover:border-blue-800 hover:text-blue-900
           focus:ring-blue-500 active:bg-blue-100
           dark:text-blue-300 dark:border-blue-400 dark:hover:bg-blue-900/20
           dark:hover:text-blue-200 dark:hover:border-blue-300 dark:active:bg-blue-900/30;
  }

  .btn-primary-ghost {
    @apply btn text-blue-800 bg-transparent hover:bg-blue-50 hover:text-blue-900
           focus:ring-blue-500 active:bg-blue-100
           dark:text-blue-300 dark:hover:bg-blue-900/20 dark:hover:text-blue-200 dark:active:bg-blue-900/30;
  }

  .btn-secondary {
    @apply btn bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500
           active:bg-gray-400 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-gray-600 dark:active:bg-gray-500;
  }

  .btn-secondary-outline {
    @apply btn border-2 border-gray-300 text-gray-700 bg-transparent
           hover:bg-gray-50 hover:border-gray-400 hover:text-gray-800
           focus:ring-gray-500 active:bg-gray-100
           dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-800
           dark:hover:text-gray-200 dark:hover:border-gray-500 dark:active:bg-gray-700;
  }

  .btn-secondary-ghost {
    @apply btn text-gray-700 bg-transparent hover:bg-gray-100 hover:text-gray-800
           focus:ring-gray-500 active:bg-gray-200
           dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-gray-200 dark:active:bg-gray-700;
  }

  .btn-danger {
    @apply btn bg-red-500 text-white hover:bg-red-600 focus:ring-red-500
           active:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700 dark:active:bg-red-800;
  }

  .btn-danger-outline {
    @apply btn border-2 border-red-500 text-red-600 bg-transparent
           hover:bg-red-50 hover:border-red-600 hover:text-red-700
           focus:ring-red-500 active:bg-red-100
           dark:text-red-400 dark:border-red-500 dark:hover:bg-red-900/20
           dark:hover:text-red-300 dark:hover:border-red-400 dark:active:bg-red-900/30;
  }

  .btn-danger-ghost {
    @apply btn text-red-600 bg-transparent hover:bg-red-50 hover:text-red-700
           focus:ring-red-500 active:bg-red-100
           dark:text-red-400 dark:hover:bg-red-900/20 dark:hover:text-red-300 dark:active:bg-red-900/30;
  }

  .btn-ghost {
    @apply btn text-gray-600 bg-transparent hover:bg-gray-100 hover:text-gray-700
           focus:ring-gray-500 active:bg-gray-200
           dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-gray-200 dark:active:bg-gray-600;
  }

  /* Input styles */
  .input {
    @apply w-full px-3 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-150
           disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-100 disabled:border-gray-200 disabled:text-gray-400
           dark:disabled:bg-gray-700 dark:disabled:border-gray-600 dark:disabled:text-gray-500;
  }

  .input-error {
    @apply input border-red-500 focus:ring-red-500;
  }

  /* ===== FORM ERROR MESSAGE STYLES ===== */
  /* Enhanced error message styling with icon and animation */
  .form-error-message {
    @apply flex items-start gap-1.5 mt-1.5 text-sm font-medium
           text-red-700 dark:text-red-400
           leading-relaxed;
  }

  /* Error icon styling */
  .form-error-icon {
    @apply w-4 h-4 flex-shrink-0 mt-0.5
           text-red-600 dark:text-red-400;
  }

  /* Success message variant */
  .form-success-message {
    @apply flex items-start gap-1.5 mt-1.5 text-sm font-medium
           text-green-700 dark:text-green-400
           leading-relaxed;
  }

  /* Warning message variant */
  .form-warning-message {
    @apply flex items-start gap-1.5 mt-1.5 text-sm font-medium
           text-amber-700 dark:text-amber-400
           leading-relaxed;
  }

  /* Info message variant */
  .form-info-message {
    @apply flex items-start gap-1.5 mt-1.5 text-sm font-medium
           text-blue-700 dark:text-blue-400
           leading-relaxed;
  }

  /* ===== DATE PICKER STYLES ===== */
  /* Base date input styling */
  input[type="date"] {
    @apply appearance-none relative;
    color-scheme: light;
  }

  .dark input[type="date"] {
    color-scheme: dark;
  }

  /* Calendar icon styling */
  input[type="date"]::-webkit-calendar-picker-indicator {
    @apply cursor-pointer opacity-70 hover:opacity-100 transition-opacity duration-150;
    filter: none;
    padding: 2px;
    border-radius: 4px;
  }

  input[type="date"]::-webkit-calendar-picker-indicator:hover {
    @apply bg-gray-100 dark:bg-gray-700;
  }

  .dark input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(1);
  }

  /* Date input text styling */
  input[type="date"]::-webkit-datetime-edit {
    @apply text-gray-900 dark:text-gray-100;
  }

  input[type="date"]::-webkit-datetime-edit-fields-wrapper {
    @apply px-0;
  }

  input[type="date"]::-webkit-datetime-edit-text {
    @apply text-gray-500 dark:text-gray-400 px-0.5;
  }

  input[type="date"]::-webkit-datetime-edit-day-field,
  input[type="date"]::-webkit-datetime-edit-month-field,
  input[type="date"]::-webkit-datetime-edit-year-field {
    @apply px-0.5 py-0 rounded transition-colors duration-150;
  }

  input[type="date"]::-webkit-datetime-edit-day-field:focus,
  input[type="date"]::-webkit-datetime-edit-month-field:focus,
  input[type="date"]::-webkit-datetime-edit-year-field:focus {
    @apply bg-blue-100 dark:bg-blue-900/50 outline-none text-blue-800 dark:text-blue-200;
  }

  /* Placeholder for empty date input */
  input[type="date"]:not(:valid)::-webkit-datetime-edit {
    @apply text-gray-400 dark:text-gray-500;
  }

  /* Focus state for date input */
  input[type="date"]:focus {
    @apply ring-2 ring-blue-500 border-transparent;
  }

  /* Disabled state for date input */
  input[type="date"]:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  input[type="date"]:disabled::-webkit-calendar-picker-indicator {
    @apply cursor-not-allowed opacity-30;
  }

  /* Firefox date input styling */
  @-moz-document url-prefix() {
    input[type="date"] {
      @apply appearance-none;
    }
  }

  /* Checkbox styles */
  .checkbox {
    @apply h-4 w-4 rounded border-gray-300 dark:border-gray-600
           bg-white dark:bg-gray-800
           text-blue-600
           focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
           focus:ring-offset-white dark:focus:ring-offset-gray-800
           transition-colors duration-150
           cursor-pointer
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .checkbox-primary {
    @apply checkbox text-blue-600 dark:text-blue-500;
  }

  .checkbox-success {
    @apply checkbox text-green-600 dark:text-green-500;
  }

  .checkbox-warning {
    @apply checkbox text-amber-600 dark:text-amber-500;
  }

  .checkbox-danger {
    @apply checkbox text-red-600 dark:text-red-500;
  }

  /* Radio button styles */
  .radio {
    @apply h-4 w-4 rounded-full border-gray-300 dark:border-gray-600
           bg-white dark:bg-gray-800
           text-blue-600
           focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
           focus:ring-offset-white dark:focus:ring-offset-gray-800
           transition-colors duration-150
           cursor-pointer
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .radio-primary {
    @apply radio text-blue-600 dark:text-blue-500;
  }

  .radio-success {
    @apply radio text-green-600 dark:text-green-500;
  }

  .radio-warning {
    @apply radio text-amber-600 dark:text-amber-500;
  }

  .radio-danger {
    @apply radio text-red-600 dark:text-red-500;
  }

  /* Checkbox/Radio label styles */
  .checkbox-label,
  .radio-label {
    @apply flex items-center gap-2 cursor-pointer transition-opacity duration-150;
  }

  .checkbox-label input:disabled,
  .radio-label input:disabled {
    @apply cursor-not-allowed;
  }

  .checkbox-label input:disabled ~ span,
  .radio-label input:disabled ~ span {
    @apply opacity-50 cursor-not-allowed text-gray-400 dark:text-gray-500;
  }

  /* Disabled label utility - apply to labels when their associated input is disabled */
  .label-disabled {
    @apply opacity-50 cursor-not-allowed text-gray-400 dark:text-gray-500;
  }

  /* Larger checkbox/radio variants */
  .checkbox-lg {
    @apply h-5 w-5;
  }

  .radio-lg {
    @apply h-5 w-5;
  }

  /* Custom styled checkbox (more modern look) */
  .checkbox-custom {
    @apply appearance-none h-4 w-4 rounded border-2 border-gray-300 dark:border-gray-600
           bg-white dark:bg-gray-800
           checked:bg-blue-600 checked:border-blue-600
           dark:checked:bg-blue-500 dark:checked:border-blue-500
           focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
           focus:ring-offset-white dark:focus:ring-offset-gray-800
           transition-all duration-150
           cursor-pointer
           disabled:opacity-50 disabled:cursor-not-allowed
           relative;
  }

  .checkbox-custom:checked::after {
    content: '';
    @apply absolute inset-0 flex items-center justify-center;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3E%3C/svg%3E");
    background-size: 100% 100%;
    background-repeat: no-repeat;
    background-position: center;
  }

  /* Custom styled radio (more modern look) */
  .radio-custom {
    @apply appearance-none h-4 w-4 rounded-full border-2 border-gray-300 dark:border-gray-600
           bg-white dark:bg-gray-800
           checked:bg-white checked:border-blue-600
           dark:checked:bg-gray-800 dark:checked:border-blue-500
           focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
           focus:ring-offset-white dark:focus:ring-offset-gray-800
           transition-all duration-150
           cursor-pointer
           disabled:opacity-50 disabled:cursor-not-allowed
           relative;
  }

  .radio-custom:checked::after {
    content: '';
    @apply absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: rgb(37, 99, 235); /* blue-600 */
  }

  .dark .radio-custom:checked::after {
    background-color: rgb(59, 130, 246); /* blue-500 */
  }

  /* Badge styles */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .badge-success {
    @apply badge bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400;
  }

  .badge-warning {
    @apply badge bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400;
  }

  .badge-error {
    @apply badge bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400;
  }

  .badge-info {
    @apply badge bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400;
  }

  /* Confidence indicators - WCAG AA compliant */
  .confidence-high {
    @apply text-green-800 dark:text-green-300;
  }

  .confidence-medium {
    @apply text-amber-800 dark:text-amber-300;
  }

  .confidence-low {
    @apply text-red-800 dark:text-red-300;
  }

  /* Enhanced Confidence Badge Styles */
  .confidence-badge {
    @apply inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold
           transition-all duration-200 shadow-sm;
  }

  .confidence-badge-high {
    @apply confidence-badge
           bg-gradient-to-br from-green-100 to-green-50 dark:from-green-900/40 dark:to-green-900/20
           text-green-800 dark:text-green-300
           border border-green-200 dark:border-green-800/50
           shadow-green-100 dark:shadow-green-900/20;
  }

  .confidence-badge-medium {
    @apply confidence-badge
           bg-gradient-to-br from-amber-100 to-amber-50 dark:from-amber-900/40 dark:to-amber-900/20
           text-amber-900 dark:text-amber-300
           border border-amber-200 dark:border-amber-800/50
           shadow-amber-100 dark:shadow-amber-900/20;
  }

  .confidence-badge-low {
    @apply confidence-badge
           bg-gradient-to-br from-red-100 to-red-50 dark:from-red-900/40 dark:to-red-900/20
           text-red-800 dark:text-red-300
           border border-red-200 dark:border-red-800/50
           shadow-red-100 dark:shadow-red-900/20;
  }

  /* Confidence badge with hover effect */
  .confidence-badge-interactive {
    @apply cursor-pointer hover:scale-105 hover:shadow-md;
  }

  /* Confidence badge icon sizing */
  .confidence-badge-icon {
    @apply w-3.5 h-3.5 flex-shrink-0;
  }

  /* ===== Document Type Badge Styles ===== */
  /* Base document type badge styling */
  .doc-type-badge {
    @apply inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold
           transition-all duration-200 shadow-sm border;
  }

  .doc-type-badge-interactive {
    @apply cursor-pointer hover:scale-105 hover:shadow-md;
  }

  /* CNH - Blue theme */
  .doc-type-badge-cnh {
    @apply doc-type-badge
           bg-gradient-to-br from-blue-100 to-blue-50 dark:from-blue-900/40 dark:to-blue-900/20
           text-blue-800 dark:text-blue-300
           border-blue-200 dark:border-blue-700/50;
  }

  /* RG - Indigo theme */
  .doc-type-badge-rg {
    @apply doc-type-badge
           bg-gradient-to-br from-indigo-100 to-indigo-50 dark:from-indigo-900/40 dark:to-indigo-900/20
           text-indigo-800 dark:text-indigo-300
           border-indigo-200 dark:border-indigo-700/50;
  }

  /* Marriage Certificate - Pink theme */
  .doc-type-badge-marriage {
    @apply doc-type-badge
           bg-gradient-to-br from-pink-100 to-pink-50 dark:from-pink-900/40 dark:to-pink-900/20
           text-pink-800 dark:text-pink-300
           border-pink-200 dark:border-pink-700/50;
  }

  /* Birth Certificate - Cyan theme */
  .doc-type-badge-birth {
    @apply doc-type-badge
           bg-gradient-to-br from-cyan-100 to-cyan-50 dark:from-cyan-900/40 dark:to-cyan-900/20
           text-cyan-800 dark:text-cyan-300
           border-cyan-200 dark:border-cyan-700/50;
  }

  /* Deed/Escritura - Emerald theme */
  .doc-type-badge-deed {
    @apply doc-type-badge
           bg-gradient-to-br from-emerald-100 to-emerald-50 dark:from-emerald-900/40 dark:to-emerald-900/20
           text-emerald-800 dark:text-emerald-300
           border-emerald-200 dark:border-emerald-700/50;
  }

  /* Proxy/Procuracao - Purple theme */
  .doc-type-badge-proxy {
    @apply doc-type-badge
           bg-gradient-to-br from-purple-100 to-purple-50 dark:from-purple-900/40 dark:to-purple-900/20
           text-purple-800 dark:text-purple-300
           border-purple-200 dark:border-purple-700/50;
  }

  /* IPTU - Orange theme */
  .doc-type-badge-iptu {
    @apply doc-type-badge
           bg-gradient-to-br from-orange-100 to-orange-50 dark:from-orange-900/40 dark:to-orange-900/20
           text-orange-800 dark:text-orange-300
           border-orange-200 dark:border-orange-700/50;
  }

  /* Other documents - Gray theme */
  .doc-type-badge-other {
    @apply doc-type-badge
           bg-gradient-to-br from-gray-100 to-gray-50 dark:from-gray-700 dark:to-gray-800
           text-gray-700 dark:text-gray-300
           border-gray-200 dark:border-gray-600;
  }

  /* Pending highlight */
  .pending-highlight {
    @apply bg-amber-100 dark:bg-amber-900/30 border-l-4 border-amber-500;
  }

  /* Browser navigation styles */
  .browser-navigation {
    @apply flex items-center gap-1;
  }

  .browser-nav-button {
    @apply p-1.5 rounded-md text-gray-500 dark:text-gray-400
           hover:bg-gray-100 dark:hover:bg-gray-700
           hover:text-gray-700 dark:hover:text-gray-200
           focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1
           disabled:opacity-40 disabled:cursor-not-allowed
           disabled:hover:bg-transparent disabled:hover:text-gray-500
           transition-colors duration-150;
  }

  .browser-nav-button:not(:disabled):active {
    @apply bg-gray-200 dark:bg-gray-600;
  }

  /* Breadcrumb navigation styles */
  .breadcrumb {
    @apply flex items-center;
  }

  .breadcrumb-list {
    @apply flex items-center space-x-1 text-sm;
  }

  .breadcrumb-item {
    @apply flex items-center;
  }

  .breadcrumb-separator {
    @apply w-4 h-4 mx-1 text-gray-400 dark:text-gray-500 flex-shrink-0;
  }

  .breadcrumb-link {
    @apply flex items-center px-2 py-1 text-gray-600 dark:text-gray-400
           hover:text-blue-600 dark:hover:text-blue-400
           hover:bg-gray-100 dark:hover:bg-gray-700/50
           rounded-md transition-colors duration-150;
  }

  .breadcrumb-current {
    @apply flex items-center px-2 py-1 text-gray-900 dark:text-white font-medium;
  }

  .breadcrumb-icon {
    @apply w-4 h-4 mr-1.5 flex-shrink-0;
  }

  .breadcrumb-text {
    @apply truncate max-w-[150px] sm:max-w-[200px];
  }

  /* Breadcrumb with divider style variation */
  .breadcrumb-divider {
    @apply flex items-center bg-gray-100 dark:bg-gray-800 rounded-lg px-2 py-1;
  }

  .breadcrumb-divider .breadcrumb-list {
    @apply space-x-0;
  }

  .breadcrumb-divider .breadcrumb-separator {
    @apply mx-2 text-gray-300 dark:text-gray-600;
  }

  .breadcrumb-divider .breadcrumb-link {
    @apply hover:bg-gray-200 dark:hover:bg-gray-700;
  }
}

/* Custom utility styles */
@layer utilities {
  /* Animation utilities */
  .animate-pulse-subtle {
    animation: pulse-subtle 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes pulse-subtle {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.7;
    }
  }

  .animate-fade-in {
    animation: fade-in 0.3s ease-out;
  }

  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Page transition animations */
  .page-transition-enter {
    animation: page-enter 0.3s ease-out;
  }

  @keyframes page-enter {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .page-transition-exit {
    animation: page-exit 0.2s ease-in;
  }

  @keyframes page-exit {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(-8px);
    }
  }

  /* Form error message slide-in animation */
  .animate-form-error-slide-in {
    animation: form-error-slide-in 0.2s ease-out;
  }

  @keyframes form-error-slide-in {
    from {
      opacity: 0;
      transform: translateY(-4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Modal animation keyframes */
  @keyframes modal-overlay-in {
    from {
      opacity: 0;
      backdrop-filter: blur(0px);
    }
    to {
      opacity: 1;
      backdrop-filter: blur(4px);
    }
  }

  @keyframes modal-overlay-out {
    from {
      opacity: 1;
      backdrop-filter: blur(4px);
    }
    to {
      opacity: 0;
      backdrop-filter: blur(0px);
    }
  }

  @keyframes modal-content-in {
    from {
      opacity: 0;
      transform: translate(-50%, -48%) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
  }

  @keyframes modal-content-out {
    from {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
    to {
      opacity: 0;
      transform: translate(-50%, -48%) scale(0.95);
    }
  }

  /* Modal spring bounce animation for a more natural feel */
  @keyframes modal-bounce-in {
    0% {
      opacity: 0;
      transform: translate(-50%, -48%) scale(0.9);
    }
    50% {
      transform: translate(-50%, -50%) scale(1.02);
    }
    100% {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
  }

  /* Scrollbar styling */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: theme('colors.gray.400') transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: theme('colors.gray.400');
    border-radius: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: theme('colors.gray.500');
  }

  /* ===== TIMELINE/HISTORY VIEW STYLES ===== */

  /* Timeline card enhanced styling */
  .timeline-card {
    @apply transition-all duration-300 ease-out;
    @apply hover:shadow-xl hover:-translate-y-0.5;
    @apply relative overflow-hidden;
  }

  .timeline-card::before {
    content: '';
    @apply absolute inset-0 opacity-0 transition-opacity duration-300;
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(99, 102, 241, 0.05) 100%);
  }

  .timeline-card:hover::before {
    @apply opacity-100;
  }

  /* Timeline icon container with enhanced shadow and glow */
  .timeline-icon {
    @apply relative transition-all duration-300;
    @apply shadow-lg;
  }

  .timeline-card:hover .timeline-icon {
    @apply scale-110 shadow-xl;
  }

  /* Timeline icon glow effect on hover */
  .timeline-icon-success {
    @apply ring-2 ring-green-200 dark:ring-green-800;
  }

  .timeline-card:hover .timeline-icon-success {
    box-shadow: 0 0 20px rgba(34, 197, 94, 0.4);
  }

  .timeline-icon-pending {
    @apply ring-2 ring-yellow-200 dark:ring-yellow-800;
  }

  .timeline-card:hover .timeline-icon-pending {
    box-shadow: 0 0 20px rgba(234, 179, 8, 0.4);
  }

  .timeline-icon-failed {
    @apply ring-2 ring-red-200 dark:ring-red-800;
  }

  .timeline-card:hover .timeline-icon-failed {
    box-shadow: 0 0 20px rgba(239, 68, 68, 0.4);
  }

  /* Timeline connector line enhancement */
  .timeline-connector {
    @apply relative;
  }

  .timeline-connector::after {
    content: '';
    @apply absolute left-1/2 top-full w-0.5 h-8 -ml-px;
    @apply bg-gradient-to-b from-gray-300 to-transparent;
    @apply dark:from-gray-600 dark:to-transparent;
  }

  /* Timeline content area */
  .timeline-content {
    @apply flex-1 min-w-0 space-y-2;
  }

  /* Timeline header with better spacing */
  .timeline-header {
    @apply flex items-start justify-between gap-3 mb-2;
  }

  /* Timeline title with gradient on hover */
  .timeline-title {
    @apply font-bold transition-all duration-200;
  }

  .timeline-card:hover .timeline-title {
    @apply bg-gradient-to-r from-purple-600 to-blue-600;
    @apply dark:from-purple-400 dark:to-blue-400;
    @apply bg-clip-text text-transparent;
  }

  /* Timeline metadata footer */
  .timeline-footer {
    @apply flex items-center justify-between text-xs;
    @apply pt-2 mt-2 border-t border-gray-200/50 dark:border-gray-700/50;
    @apply transition-colors duration-200;
  }

  .timeline-card:hover .timeline-footer {
    @apply border-gray-300 dark:border-gray-600;
  }

  /* Timeline changes preview section */
  .timeline-changes {
    @apply mt-3 pt-3 space-y-2;
    @apply border-t border-gray-200 dark:border-gray-700;
  }

  .timeline-changes-header {
    @apply text-xs font-semibold text-gray-500 dark:text-gray-400;
    @apply uppercase tracking-wider mb-2;
  }

  .timeline-change-item {
    @apply text-sm bg-gray-50 dark:bg-gray-800/50;
    @apply rounded-lg p-2 transition-colors duration-200;
    @apply hover:bg-gray-100 dark:hover:bg-gray-800;
  }

  .timeline-change-field {
    @apply font-medium text-gray-700 dark:text-gray-300 mb-1;
  }

  .timeline-change-values {
    @apply flex items-center gap-2 text-xs;
  }

  .timeline-change-old {
    @apply line-through text-red-600 dark:text-red-400;
    @apply bg-red-50 dark:bg-red-900/20 px-2 py-0.5 rounded;
  }

  .timeline-change-new {
    @apply text-green-600 dark:text-green-400;
    @apply bg-green-50 dark:bg-green-900/20 px-2 py-0.5 rounded;
  }

  .timeline-change-arrow {
    @apply text-gray-400 dark:text-gray-500;
  }

  /* Timeline empty state */
  .timeline-empty {
    @apply glass-subtle p-8 text-center rounded-lg;
  }

  .timeline-empty-icon {
    @apply w-12 h-12 text-gray-400 dark:text-gray-600 mx-auto mb-3 opacity-50;
  }

  .timeline-empty-title {
    @apply text-gray-600 dark:text-gray-400 font-medium mb-1;
  }

  .timeline-empty-description {
    @apply text-sm text-gray-500 dark:text-gray-500;
  }

  /* Timeline filter section styling */
  .timeline-filters {
    @apply glass-card p-4 flex-shrink-0;
  }

  .timeline-filter-row {
    @apply flex items-end gap-4 flex-wrap;
  }

  .timeline-filter-field {
    @apply flex-1 min-w-[160px];
  }

  .timeline-filter-label {
    @apply text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block;
    @apply flex items-center gap-2;
  }

  /* Timeline header card */
  .timeline-header-card {
    @apply glass-card p-6 flex-shrink-0;
  }

  .timeline-header-content {
    @apply flex items-start justify-between gap-4;
  }

  .timeline-header-title-wrapper {
    @apply flex items-center gap-3;
  }

  .timeline-header-icon-wrapper {
    @apply p-2 rounded-lg shadow-md;
    @apply bg-gradient-to-br from-purple-500 to-purple-600;
    @apply dark:from-purple-600 dark:to-purple-700;
  }

  .timeline-header-icon {
    @apply w-6 h-6 text-white;
  }

  .timeline-header-title {
    @apply text-2xl font-bold text-gray-900 dark:text-white;
  }

  .timeline-header-subtitle {
    @apply text-sm text-gray-500 dark:text-gray-400 mt-1;
  }

  .timeline-header-count {
    @apply font-semibold text-gray-700 dark:text-gray-300;
  }

  /* Timeline action buttons */
  .timeline-action-buttons {
    @apply flex gap-2;
  }

  /* Staggered animation for timeline items */
  @keyframes timeline-slide-in {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .timeline-item-animate {
    animation: timeline-slide-in 0.3s ease-out forwards;
  }

  .timeline-item-animate:nth-child(1) { animation-delay: 0.05s; }
  .timeline-item-animate:nth-child(2) { animation-delay: 0.1s; }
  .timeline-item-animate:nth-child(3) { animation-delay: 0.15s; }
  .timeline-item-animate:nth-child(4) { animation-delay: 0.2s; }
  .timeline-item-animate:nth-child(5) { animation-delay: 0.25s; }

  /* Responsive timeline adjustments */
  @media (max-width: 640px) {
    .timeline-header-content {
      @apply flex-col;
    }

    .timeline-action-buttons {
      @apply w-full flex-col;
    }

    .timeline-filter-row {
      @apply flex-col items-stretch;
    }

    .timeline-filter-field {
      @apply w-full;
    }
  }

  /* Reduced motion support for timeline */
  @media (prefers-reduced-motion: reduce) {
    .timeline-card,
    .timeline-icon,
    .timeline-title,
    .timeline-footer,
    .timeline-change-item {
      transition: none !important;
    }

    .timeline-card:hover {
      transform: none !important;
    }

    .timeline-card:hover .timeline-icon {
      transform: none !important;
      box-shadow: none !important;
    }

    .timeline-item-animate {
      animation: none !important;
    }
  }

  /* ===== FOCUS-VISIBLE UTILITY CLASSES ===== */

  /* Focus ring utility for custom components */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2;
  }

  .dark .focus-ring {
    @apply focus-visible:ring-blue-400;
  }

  /* Focus ring with stronger emphasis */
  .focus-ring-strong {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 focus-visible:shadow-lg;
  }

  .dark .focus-ring-strong {
    @apply focus-visible:ring-blue-400;
  }

  /* Focus ring without offset (for inline elements) */
  .focus-ring-inset {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-blue-500;
  }

  .dark .focus-ring-inset {
    @apply focus-visible:ring-blue-400;
  }

  /* Focus ring for danger/destructive actions */
  .focus-ring-danger {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2;
  }

  .dark .focus-ring-danger {
    @apply focus-visible:ring-red-400;
  }

  /* Focus ring for success actions */
  .focus-ring-success {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2;
  }

  .dark .focus-ring-success {
    @apply focus-visible:ring-green-400;
  }

  /* Skip link utility - hidden until focused */
  .skip-link {
    @apply absolute -top-10 left-0 z-50 px-4 py-2 bg-blue-600 text-white rounded-md;
    @apply focus-visible:top-4 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white;
  }

  /* Focus-visible indicator for card-like interactive elements */
  .focus-card {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 focus-visible:shadow-xl;
  }

  .dark .focus-card {
    @apply focus-visible:ring-blue-400;
  }

  /* ===== TYPOGRAPHY HIERARCHY UTILITIES ===== */

  /* Display text - for hero sections and major headings */
  .text-display-lg {
    @apply text-display-lg font-bold text-gray-900 dark:text-white;
  }

  .text-display-md {
    @apply text-display-md font-bold text-gray-900 dark:text-white;
  }

  .text-display-sm {
    @apply text-display-sm font-bold text-gray-900 dark:text-white;
  }

  /* Heading text - for section headings */
  .text-h1 {
    @apply text-h1 font-bold text-gray-900 dark:text-white;
  }

  .text-h2 {
    @apply text-h2 font-semibold text-gray-900 dark:text-white;
  }

  .text-h3 {
    @apply text-h3 font-semibold text-gray-900 dark:text-white;
  }

  .text-h4 {
    @apply text-h4 font-semibold text-gray-800 dark:text-gray-100;
  }

  .text-h5 {
    @apply text-h5 font-semibold text-gray-800 dark:text-gray-100;
  }

  .text-h6 {
    @apply text-h6 font-semibold text-gray-800 dark:text-gray-100;
  }

  /* Body text - for main content */
  .text-body-lg {
    @apply text-body-lg text-gray-700 dark:text-gray-300;
  }

  .text-body {
    @apply text-body text-gray-700 dark:text-gray-300;
  }

  .text-body-sm {
    @apply text-body-sm text-gray-600 dark:text-gray-400;
  }

  /* Caption text - for supplementary info */
  .text-caption {
    @apply text-caption text-gray-500 dark:text-gray-400;
  }

  /* Overline text - for labels and categories */
  .text-overline {
    @apply text-overline text-gray-600 dark:text-gray-400;
  }

  /* Muted text variant */
  .text-muted {
    @apply text-gray-500 dark:text-gray-400;
  }

  /* Emphasis variants */
  .text-emphasis {
    @apply font-semibold text-gray-900 dark:text-white;
  }

  .text-subtle {
    @apply text-gray-600 dark:text-gray-400;
  }

  /* Link text */
  .text-link {
    @apply text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 underline-offset-2 transition-colors;
  }

  /* Error text */
  .text-error {
    @apply text-red-700 dark:text-red-400 font-medium;
  }

  /* Success text */
  .text-success {
    @apply text-green-700 dark:text-green-400 font-medium;
  }

  /* Warning text */
  .text-warning {
    @apply text-amber-700 dark:text-amber-400 font-medium;
  }

  /* Info text */
  .text-info {
    @apply text-blue-700 dark:text-blue-400 font-medium;
  }
}

/* React Flow custom styles */
.react-flow__node-person {
  @apply bg-white dark:bg-gray-800 border-2 border-blue-500 rounded-lg shadow-md;
}

.react-flow__node-property {
  @apply bg-white dark:bg-gray-800 border-2 border-green-500 rounded-lg shadow-md;
}

.react-flow__node.selected {
  @apply ring-2 ring-blue-500 ring-offset-2;
}

.react-flow__edge-path {
  stroke-width: 2;
}

.react-flow__edge.selected .react-flow__edge-path {
  stroke-width: 3;
}

/* React Flow pan/zoom smoothness improvements */
.react-flow__pane {
  cursor: grab;
  transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.react-flow__pane:active {
  cursor: grabbing;
}

.react-flow__renderer {
  /* Enable GPU acceleration for smooth rendering */
  will-change: transform;
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

.react-flow__viewport {
  /* Smooth transitions for zoom and pan */
  transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

.react-flow__node {
  /* Smooth node transitions */
  transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}

.react-flow__edge {
  /* Smooth edge transitions */
  transition: stroke 0.2s ease-in-out, stroke-width 0.2s ease-in-out;
}

/* Disable transitions during active pan/zoom for performance */
.react-flow.is-panning .react-flow__viewport,
.react-flow.is-zooming .react-flow__viewport {
  transition: none;
}

/* Smooth minimap interactions */
.react-flow__minimap {
  transition: opacity 0.2s ease-in-out;
}

/* Improve controls appearance and transitions */
.react-flow__controls {
  transition: opacity 0.2s ease-in-out;
}

.react-flow__controls-button {
  transition: background-color 0.15s ease-in-out, transform 0.15s ease-in-out;
}

.react-flow__controls-button:hover {
  transform: scale(1.05);
}

.react-flow__controls-button:active {
  transform: scale(0.95);
}

/* Smooth background transitions */
.react-flow__background {
  transition: opacity 0.2s ease-in-out;
}

/* Improve selection box appearance */
.react-flow__selection {
  @apply border-2 border-blue-500 bg-blue-100 bg-opacity-20;
  transition: all 0.15s ease-in-out;
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  .react-flow__pane,
  .react-flow__viewport,
  .react-flow__node,
  .react-flow__edge,
  .react-flow__minimap,
  .react-flow__controls,
  .react-flow__controls-button,
  .react-flow__background,
  .react-flow__selection {
    transition: none !important;
  }
}

/* Tiptap editor styles */
.tiptap-editor {
  @apply prose dark:prose-invert max-w-none;
}

.tiptap-editor:focus {
  @apply outline-none;
}

.tiptap-editor p.is-editor-empty:first-child::before {
  @apply text-gray-400 dark:text-gray-500;
  content: attr(data-placeholder);
  float: left;
  height: 0;
  pointer-events: none;
}

/* Pending item highlight in draft editor */
.pending-item-highlight {
  @apply bg-amber-200 dark:bg-amber-900/40
         text-gray-900 dark:text-amber-100
         px-1 py-0.5 rounded
         cursor-help
         relative
         transition-colors duration-200;
  text-decoration: underline;
  text-decoration-color: theme('colors.amber.500');
  text-decoration-style: wavy;
  text-underline-offset: 2px;
}

.pending-item-highlight:hover {
  @apply bg-amber-300 dark:bg-amber-800/50;
}

/* Track changes mode styles */
.track-changes-enabled {
  /* When track changes is enabled, show visual indicators */
  position: relative;
}

/* Insertions in track changes mode */
.track-changes-enabled ins {
  @apply text-green-700 dark:text-green-400
         bg-green-50 dark:bg-green-900/20
         px-0.5 rounded;
  text-decoration: none;
  border-bottom: 2px solid theme('colors.green.500');
}

/* Deletions in track changes mode */
.track-changes-enabled del {
  @apply text-red-700 dark:text-red-400
         bg-red-50 dark:bg-red-900/20
         px-0.5 rounded;
  text-decoration: line-through;
  text-decoration-color: theme('colors.red.500');
  opacity: 0.8;
}

/* Inline edit field styles */
.inline-edit-field {
  @apply transition-all duration-200;
  cursor: pointer;
  border-bottom: 2px dotted rgba(59, 130, 246, 0.5);
}

.inline-edit-field:hover {
  @apply bg-blue-50 dark:bg-blue-900/20;
  border-bottom-color: rgba(59, 130, 246, 0.8);
  border-bottom-style: solid;
}

/* Severity-based pending item styles */
.pending-item-highlight[data-pending-severity="error"] {
  @apply bg-red-200 dark:bg-red-900/40;
  text-decoration-color: theme('colors.red.500');
}

.pending-item-highlight[data-pending-severity="error"]:hover {
  @apply bg-red-300 dark:bg-red-800/50;
}

.pending-item-highlight[data-pending-severity="info"] {
  @apply bg-blue-200 dark:bg-blue-900/40;
  text-decoration-color: theme('colors.blue.500');
}

.pending-item-highlight[data-pending-severity="info"]:hover {
  @apply bg-blue-300 dark:bg-blue-800/50;
}

/* ============================================================================
   Evidence Modal Styles
   ============================================================================ */

/* -----------------------------------------------------------------------------
   Evidence Modal Container
   ----------------------------------------------------------------------------- */

/* Modal container backdrop and overlay */
.evidence-modal-container {
  /* Ensure proper stacking context */
  isolation: isolate;
}

/* Modal backdrop with blur effect */
.evidence-modal-backdrop {
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

/* Main modal panel */
.evidence-modal {
  /* Ensure modal is above backdrop */
  z-index: 10;

  /* Prevent content overflow during animations */
  will-change: transform, opacity;
}

/* Modal header styling */
.evidence-modal-header {
  flex-shrink: 0;
  z-index: 20;
}

/* Modal content area */
.evidence-modal-content {
  /* Ensure proper stacking for overlays */
  isolation: isolate;
}

/* Box navigation control bar */
.evidence-modal-box-nav {
  /* Floating control bar positioning */
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* -----------------------------------------------------------------------------
   Document Viewer Styles
   ----------------------------------------------------------------------------- */

/* Main document viewer container */
.document-viewer {
  /* Ensure smooth rendering during transforms */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Document viewer content wrapper */
.document-viewer-content {
  /* Enable GPU acceleration for smooth pan/zoom */
  will-change: transform;
}

/* Document viewer overlay container for bounding boxes */
.document-viewer-overlay {
  /* Ensure overlay is above document but below controls */
  z-index: 5;
  pointer-events: none;
}

/* Zoom control bar */
.document-viewer-controls {
  /* Floating control bar with blur */
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* Grabbing cursor state */
.document-viewer.cursor-grabbing {
  cursor: grabbing !important;
}

.document-viewer.cursor-grab:not(.cursor-grabbing) {
  cursor: grab;
}

/* Prevent user selection during pan operations */
.document-viewer.cursor-grabbing * {
  user-select: none !important;
  -webkit-user-select: none !important;
}

/* -----------------------------------------------------------------------------
   Bounding Box Overlay Styles
   ----------------------------------------------------------------------------- */

/* SVG overlay container */
.bounding-box-overlay {
  /* Ensure SVG renders crisply */
  shape-rendering: geometricPrecision;
}

/* Bounding boxes group */
.bounding-boxes {
  /* Allow pointer events on boxes */
  pointer-events: auto;
}

/* -----------------------------------------------------------------------------
   Highlight Box Styles
   ----------------------------------------------------------------------------- */

/* Highlight Box base styles */
.highlight-box {
  cursor: pointer;
  outline: none;
  /* Smooth transitions for hover/selection states */
  transition: fill-opacity 150ms ease-in-out,
              stroke-width 150ms ease-in-out;
}

.highlight-box:focus-visible {
  outline: 2px solid theme('colors.blue.500');
  outline-offset: 2px;
}

/* Highlight box group container */
.highlight-box-group {
  transition: all 150ms ease-in-out;
}

/* Selected state with glow effect */
.highlight-box-selected {
  filter: drop-shadow(0 0 4px rgba(59, 130, 246, 0.5));
}

/* Hovered state with subtle glow */
.highlight-box-hovered {
  filter: drop-shadow(0 0 2px rgba(59, 130, 246, 0.3));
}

/* Selection ring animation around selected boxes */
.highlight-box-selection-ring {
  animation: selection-pulse 2s ease-in-out infinite;
}

@keyframes selection-pulse {
  0%, 100% {
    opacity: 0.6;
    stroke-dashoffset: 0;
  }
  50% {
    opacity: 0.3;
    stroke-dashoffset: 6;
  }
}

/* High confidence box styling (green) */
.highlight-box-confidence-high {
  --box-color: theme('colors.green.500');
}

/* Medium confidence box styling (amber) */
.highlight-box-confidence-medium {
  --box-color: theme('colors.amber.500');
}

/* Low confidence box styling (red) */
.highlight-box-confidence-low {
  --box-color: theme('colors.red.500');
}

/* -----------------------------------------------------------------------------
   Evidence Tooltip Styles
   ----------------------------------------------------------------------------- */

/* Tooltip base with fade-in animation */
.evidence-tooltip {
  animation: tooltip-fade-in 150ms ease-out;
  /* Ensure tooltip is above other elements */
  z-index: 100;
}

@keyframes tooltip-fade-in {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

/* Tooltip arrow indicator (optional, for future use) */
.evidence-tooltip-arrow {
  position: absolute;
  width: 8px;
  height: 8px;
  background: inherit;
  transform: rotate(45deg);
}

.evidence-tooltip-arrow-top {
  bottom: -4px;
  left: 50%;
  margin-left: -4px;
  border-right: 1px solid theme('colors.gray.200');
  border-bottom: 1px solid theme('colors.gray.200');
}

.dark .evidence-tooltip-arrow-top {
  border-right: 1px solid theme('colors.gray.700');
  border-bottom: 1px solid theme('colors.gray.700');
}

/* -----------------------------------------------------------------------------
   Evidence Modal Responsive Adjustments
   ----------------------------------------------------------------------------- */

/* Mobile-first adjustments */
@media (max-width: 640px) {
  .evidence-modal {
    /* Full screen on mobile with minimal margin */
    inset: 8px !important;
  }

  .evidence-modal-header {
    /* Slightly smaller padding on mobile */
    padding: 0.75rem 1rem;
  }

  .document-viewer-controls {
    /* Ensure controls are reachable on small screens */
    bottom: 0.5rem;
    padding: 0.25rem;
  }

  .evidence-modal-box-nav {
    /* Adjust position for smaller screens */
    bottom: 4rem;
  }
}

/* Tablet adjustments */
@media (min-width: 641px) and (max-width: 1024px) {
  .evidence-modal {
    inset: 1.5rem !important;
  }
}

/* -----------------------------------------------------------------------------
   Accessibility Enhancements
   ----------------------------------------------------------------------------- */

/* High contrast mode support */
@media (prefers-contrast: high) {
  .highlight-box {
    stroke-width: 3px !important;
  }

  .highlight-box-selected {
    filter: drop-shadow(0 0 6px rgba(59, 130, 246, 0.8));
  }

  .evidence-modal-backdrop {
    background-color: rgba(0, 0, 0, 0.8);
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .highlight-box,
  .highlight-box-group,
  .evidence-tooltip,
  .evidence-modal,
  .evidence-modal-backdrop,
  .animate-form-error-slide-in {
    animation: none !important;
    transition: none !important;
  }

  .highlight-box-selection-ring {
    animation: none !important;
    opacity: 0.6;
  }

  .document-viewer-content {
    transition: none !important;
  }
}

/* Focus visible improvements for keyboard navigation */
.evidence-modal :focus-visible {
  outline: 2px solid theme('colors.blue.500');
  outline-offset: 2px;
}

/* Skip link for modal accessibility */
.evidence-modal-skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  z-index: 100;
  padding: 8px;
  background: theme('colors.white');
  color: theme('colors.gray.900');
}

.evidence-modal-skip-link:focus {
  top: 0;
}

.dark .evidence-modal-skip-link {
  background: theme('colors.gray.800');
  color: theme('colors.gray.100');
}

/* -----------------------------------------------------------------------------
   Print Styles
   ----------------------------------------------------------------------------- */

@media print {
  /* Evidence Modal Print Styles */
  .evidence-modal-container {
    position: static;
    background: none;
  }

  .evidence-modal-backdrop {
    display: none;
  }

  .evidence-modal {
    position: static;
    box-shadow: none;
    border: 1px solid #000;
    page-break-inside: avoid;
  }

  .document-viewer-controls,
  .evidence-modal-box-nav {
    display: none;
  }

  .highlight-box {
    print-color-adjust: exact;
    -webkit-print-color-adjust: exact;
  }

  /* =========================================================================
     Draft Print Styles
     ========================================================================= */

  /* Global Print Settings */
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }

  /* Body and Layout */
  body {
    background: white !important;
    color: black !important;
    font-size: 12pt !important;
    line-height: 1.6 !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Hide non-printable elements */
  nav,
  aside,
  header,
  footer,
  .no-print,
  .chat-panel,
  .glass-card,
  button,
  .btn,
  .toolbar,
  .sidebar,
  .navigation,
  .breadcrumb,
  [role="navigation"],
  [role="complementary"] {
    display: none !important;
  }

  /* Editor Container */
  .tiptap-editor,
  .ProseMirror {
    background: white !important;
    color: black !important;
    padding: 0 !important;
    margin: 0 !important;
    max-width: 100% !important;
    border: none !important;
    box-shadow: none !important;
  }

  /* Typography - Headers */
  h1, h2, h3, h4, h5, h6 {
    color: black !important;
    page-break-after: avoid !important;
    break-after: avoid !important;
    page-break-inside: avoid !important;
    break-inside: avoid !important;
    orphans: 3;
    widows: 3;
  }

  h1 {
    font-size: 18pt !important;
    font-weight: bold !important;
    margin-top: 0 !important;
    margin-bottom: 12pt !important;
  }

  h2 {
    font-size: 16pt !important;
    font-weight: bold !important;
    margin-top: 18pt !important;
    margin-bottom: 10pt !important;
  }

  h3 {
    font-size: 14pt !important;
    font-weight: bold !important;
    margin-top: 14pt !important;
    margin-bottom: 8pt !important;
  }

  h4, h5, h6 {
    font-size: 12pt !important;
    font-weight: bold !important;
    margin-top: 12pt !important;
    margin-bottom: 6pt !important;
  }

  /* Typography - Paragraphs and Lists */
  p {
    color: black !important;
    margin-bottom: 10pt !important;
    text-align: justify !important;
    orphans: 3;
    widows: 3;
  }

  ul, ol {
    margin-left: 20pt !important;
    margin-bottom: 10pt !important;
  }

  li {
    margin-bottom: 4pt !important;
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }

  /* Text Formatting */
  strong, b {
    font-weight: bold !important;
    color: black !important;
  }

  em, i {
    font-style: italic !important;
    color: black !important;
  }

  u {
    text-decoration: underline !important;
    color: black !important;
  }

  /* Links */
  a {
    color: black !important;
    text-decoration: underline !important;
  }

  a[href]:after {
    content: " (" attr(href) ")" !important;
    font-size: 9pt !important;
    font-style: italic !important;
  }

  /* Tables */
  table {
    width: 100% !important;
    border-collapse: collapse !important;
    margin-bottom: 12pt !important;
    page-break-inside: auto !important;
  }

  thead {
    display: table-header-group !important;
  }

  tbody {
    display: table-row-group !important;
  }

  tr {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }

  th, td {
    border: 1px solid black !important;
    padding: 6pt !important;
    text-align: left !important;
  }

  th {
    background-color: #f0f0f0 !important;
    font-weight: bold !important;
  }

  /* Blockquotes */
  blockquote {
    border-left: 4px solid #000 !important;
    padding-left: 12pt !important;
    margin-left: 0 !important;
    margin-bottom: 10pt !important;
    font-style: italic !important;
    page-break-inside: avoid !important;
  }

  /* Code Blocks */
  code {
    font-family: 'Courier New', Courier, monospace !important;
    background-color: #f5f5f5 !important;
    padding: 2pt 4pt !important;
    border: 1px solid #ddd !important;
    border-radius: 2pt !important;
    font-size: 10pt !important;
  }

  pre {
    background-color: #f5f5f5 !important;
    border: 1px solid #ddd !important;
    padding: 8pt !important;
    margin-bottom: 10pt !important;
    page-break-inside: avoid !important;
    white-space: pre-wrap !important;
    word-wrap: break-word !important;
  }

  pre code {
    background: none !important;
    border: none !important;
    padding: 0 !important;
  }

  /* Horizontal Rules */
  hr {
    border: none !important;
    border-top: 1px solid black !important;
    margin: 20pt 0 !important;
    page-break-after: avoid !important;
  }

  /* Images */
  img {
    max-width: 100% !important;
    height: auto !important;
    page-break-inside: avoid !important;
    display: block !important;
    margin: 10pt auto !important;
  }

  /* Hide Track Changes and Pending Items in Print */
  .pending-item-highlight,
  .track-changes-enabled ins,
  .track-changes-enabled del,
  .inline-edit-field {
    background: transparent !important;
    color: black !important;
    text-decoration: none !important;
    border: none !important;
  }

  /* Remove all borders from track changes */
  ins, del {
    background: transparent !important;
    color: black !important;
    text-decoration: none !important;
  }

  /* Page Breaks */
  .page-break {
    page-break-before: always !important;
    break-before: page !important;
  }

  .avoid-break {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }

  /* Metadata Section */
  .metadata {
    margin-bottom: 20pt !important;
    padding: 10pt !important;
    border: 1px solid #000 !important;
    page-break-after: avoid !important;
  }

  .metadata-item {
    margin-bottom: 4pt !important;
  }

  .metadata-label {
    font-weight: bold !important;
  }

  /* Draft Editor Specific Containers */
  .draft-container,
  .editor-content,
  .content-wrapper {
    background: white !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
    box-shadow: none !important;
  }

  /* Remove glassmorphism effects */
  .glass,
  .glass-card,
  .glass-strong,
  .glass-subtle,
  .glass-elevated {
    background: white !important;
    backdrop-filter: none !important;
    border: none !important;
    box-shadow: none !important;
  }

  /* Badges and Status Indicators - Simplify for print */
  .badge,
  .badge-success,
  .badge-warning,
  .badge-error,
  .badge-info {
    background: transparent !important;
    border: 1px solid black !important;
    color: black !important;
    padding: 2pt 4pt !important;
  }

  /* Confidence Badges */
  .confidence-badge,
  .confidence-badge-high,
  .confidence-badge-medium,
  .confidence-badge-low {
    background: transparent !important;
    border: 1px solid black !important;
    color: black !important;
  }

  /* Ensure proper margins for A4 printing */
  @page {
    size: A4;
    margin: 2cm;
  }

  /* First page specific margins if needed */
  @page :first {
    margin-top: 3cm;
  }

  /* Orphan and widow control */
  p, li, blockquote {
    orphans: 3;
    widows: 3;
  }
}
